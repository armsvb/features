<LinuxCNC-Features>
  <feature src="mill/draw/draw.ini" after="&#10;O&lt;milldraw-exec&gt; CALL [[#param_surface]] [[#param_depth]]" help="&lt;big&gt;Draw&lt;/big&gt;" name="Draw 0001" image="images/draw.png" expanded="True" id="Draw-0001" call="" selected="False" definitions="&#10;( Draw definitions )&#10;&#9;;py,import os&#10;&#9;;py,import sys&#10;&#9;;py,()&#10;&#9;;py,sys.path.append(&quot;&lt;eval&gt;os.path.dirname(__file__)&lt;/eval&gt;/subroutines/mill/draw/&quot;)&#10;&#9;;py,from milldraw import *&#10;&#9;;py,milldraw = MillDraw()&#10;&#9;(Parse commands from external python script)&#10;&#9;O&lt;milldraw-exec&gt; SUB&#10;&#9;&#9;#&lt;draw_param_g&gt; = 1&#10;&#9;&#9;; // py,log(&quot;start draw&quot;)&#10;&#9;&#9;; Set parameters&#10;&#9;&#9;;py,milldraw.path.process.surface&#9;&#9;&#9;= interpreter.this.params[1]&#10;&#9;&#9;;py,milldraw.path.process.depth&#9;&#9;&#9;&#9;= interpreter.this.params[2]&#10;&#9;&#9;;py,milldraw.path.process.depth_step&#9;&#9;= interpreter.this.params['_global_depth_step']&#10;&#9;&#9;;py,milldraw.path.process.rappid&#9;&#9;&#9;= interpreter.this.params['_global_rappid']&#10;&#9;&#9;;py,milldraw.path.process.feed&#9;&#9;&#9;&#9;= interpreter.this.params['_global_feed']&#10;&#9;&#9;;py,milldraw.path.process.penetration_feed&#9;= interpreter.this.params['_global_penetration_feed']&#10;&#9;&#9;;py,milldraw.path.process.penetration_angle&#9;= interpreter.this.params['_global_penetration_angle']/180*3.1415926535897931&#10;&#9;&#9;;py,milldraw.path.process.spindle&#9;&#9;&#9;= interpreter.this.params['_global_spindle']&#10;&#9;&#9;;py,milldraw.path.process.final&#9;&#9;&#9;&#9;= interpreter.this.params['_global_final']&#10;&#9;&#9;;py,milldraw.path.process.final_num&#9;&#9;&#9;= interpreter.this.params['_global_final_num']&#10;&#9;&#9;;py,milldraw.path.process.final_feed&#9;&#9;= interpreter.this.params['_global_final_feed']&#10;&#9;&#9;;py,milldraw.path.process.final_spindle&#9;&#9;= interpreter.this.params['_global_final_spindle']&#10;&#9;&#9;; Process to get Gcode&#10;&#9;&#9;;py,milldraw.process()&#10;&#9;&#9;;py,interpreter.this.params['lines']=len(milldraw.exp)&#10;&#9;&#9;O&lt;milldraw-exec-repeat&gt; REPEAT [#&lt;lines&gt;]&#10;&#9;&#9;&#9;; Get Gcode in own format (gcode-type, x,y,z,i,j,k,feed)&#10;&#9;&#9;&#9;;py,g,x,y,z,i,j,k,f = milldraw.get_line()&#10;&#9;&#9;&#9;;  py,log(g,x,y,z,i,j,k,f)&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_g']=g&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_x']=float(x) if x != None else 0&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_y']=float(y) if y != None else 0&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_z']=float(z) if z != None else 0&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_i']=float(i) if i != None else 0&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_j']=float(j) if j != None else 0&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_k']=float(k) if k != None else 0&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_f']=float(f) if f != None else -1&#10;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if-01&gt; IF [#&lt;draw_param_f&gt; GT 0]&#10;&#9;&#9;&#9;&#9;F#&lt;draw_param_f&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if-01&gt; ENDIF&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt;     IF [ #&lt;draw_param_g&gt; EQ -100 ] ; Set Spindle&#10;&#9;&#9;&#9;&#9;S#&lt;draw_param_x&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 130 ] ; G1 XY move&#10;&#9;&#9;&#9;&#9;G01 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 140 ] ; G1 Z&#10;&#9;&#9;&#9;&#9;G01 Z#&lt;draw_param_z&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 170 ] ; G1 XYZ&#10;&#9;&#9;&#9;&#9;G01 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; Z#&lt;draw_param_z&gt;&#10;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ  30 ] ; G0 XY&#10;&#9;&#9;&#9;&#9;G00 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ  40 ] ; G0 Z&#10;&#9;&#9;&#9;&#9;G00 Z#&lt;draw_param_z&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ  70 ] ; G0 XYZ&#10;&#9;&#9;&#9;&#9;G00 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; Z#&lt;draw_param_z&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 215 ]&#10;&#9;&#9;&#9;&#9;G02 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; I#&lt;draw_param_i&gt; J#&lt;draw_param_j&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 315 ]&#10;&#9;&#9;&#9;&#9;G03 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; I#&lt;draw_param_i&gt; J#&lt;draw_param_j&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 231 ]&#10;&#9;&#9;&#9;&#9;G02 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; I#&lt;draw_param_i&gt; J#&lt;draw_param_j&gt; Z#&lt;draw_param_z&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 331 ]&#10;&#9;&#9;&#9;&#9;G03 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; I#&lt;draw_param_i&gt; J#&lt;draw_param_j&gt; Z#&lt;draw_param_z&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ENDIF&#10;&#10;&#9;&#9;O&lt;milldraw-exec-repeat&gt; ENDREPEAT&#10;&#9;&#9;;py,log(&quot;end draw&quot;)&#10;&#9;&#9;;py;log()&#10;&#9;O&lt;milldraw-exec&gt; ENDSUB&#10;&#10;( /Draw definitions )" path="0" before="&#10;#&lt;draw_tmp_x&gt; = [#param_x]&#10;#&lt;draw_tmp_y&gt; = [#param_y]&#10;#&lt;_draw_start_x&gt; = [#param_x]&#10;#&lt;_draw_start_y&gt; = [#param_y]&#10;;py,milldraw.draw_start(interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'])&#10;#&lt;_draw_x&gt; = [#param_x]&#10;#&lt;_draw_y&gt; = [#param_y]&#10;" type="Draw" order="['PARAM_X', 'PARAM_Y', 'PARAM_SURFACE', 'PARAM_DEPTH']" icon="icons/draw.png">
    <param tool_tip="X start" expanded="False" name="X" selected="False" value="#&lt;_x&gt;" call="#param_x" path="0:0" type="float" icon=""/>
    <param tool_tip="Y start" expanded="False" name="Y" selected="False" value="#&lt;_y&gt;" call="#param_y" path="0:1" type="float" icon=""/>
    <param tool_tip="Surface" expanded="False" name="Surface" selected="False" value="#&lt;_global_surface&gt;" call="#param_surface" path="0:2" type="float" icon="icons/surface.png"/>
    <param tool_tip="Depth" expanded="False" name="Depth" selected="False" value="#&lt;_global_depth&gt;" call="#param_depth" path="0:3" type="float" icon="icons/depth.png"/>
    <param tool_tip="Drop Draw items here" expanded="True" name="Items" selected="False" call="#param_items" path="0:4" type="items" icon="icons/items.png">
      <feature src="mill/draw/line-rel.ini" expanded="True" help="&lt;big&gt;Line relative&lt;/big&gt;" icon="icons/line-rel.png" image="images/line-rel.png" after="" order="['PARAM_X', 'PARAM_Y']" call="&#10;#&lt;draw_tmp_x&gt; = [[#param_x]+#&lt;_draw_x&gt;]&#10;#&lt;draw_tmp_y&gt; = [[#param_y]+#&lt;_draw_y&gt;]&#10;;py,milldraw.line_to(interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'])&#10;#&lt;_draw_x&gt; = [#&lt;_draw_x&gt;+[#param_x]]&#10;#&lt;_draw_y&gt; = [#&lt;_draw_y&gt;+[#param_y]]&#10;" selected="False" path="0:4:0" definitions="" before="&#10;" type="Line relative" id="Line-relative-0001" name="Line relative 0001">
        <param tool_tip="X" expanded="False" name="X" selected="False" value="20" call="#param_x" path="0:4:0:0" type="float" icon=""/>
        <param tool_tip="Y" expanded="False" name="Y" selected="False" value="0" call="#param_y" path="0:4:0:1" type="float" icon=""/>
      </feature>
      <feature src="mill/draw/arc-xyij-rel.ini" after="" help="&lt;big&gt;Arc to&lt;/big&gt;&#10;Params:&#10;&#9;X,Y - absolute coordinates of the end&#10;&#9;I,J - relative to start position&#10;" name="Arc to by XYIJ 0001" image="images/arc-to-xyij.png" expanded="True" id="Arc-to-by-XYIJ-0001" call="&#10;#&lt;draw_tmp_g&gt; = [#param_g]&#10;#&lt;draw_tmp_x&gt; = [[#param_x]+#&lt;draw_x&gt;]&#10;#&lt;draw_tmp_y&gt; = [[#param_y]+#&lt;draw_y&gt;]&#10;#&lt;draw_tmp_i&gt; = [#param_i]&#10;#&lt;draw_tmp_j&gt; = [#param_j]&#10;;py,milldraw.arc_to(interpreter.this.params['draw_tmp_g'],interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'],interpreter.this.params['draw_tmp_i'],interpreter.this.params['draw_tmp_j'])&#10;#&lt;_draw_x&gt; = [[#param_x]+#&lt;draw_x&gt;]&#10;#&lt;_draw_y&gt; = [[#param_y]+#&lt;draw_y&gt;]&#10;" selected="False" definitions="" path="0:4:1" before="&#10;" type="Arc to by XYIJ" order="['PARAM_G', 'PARAM_X', 'PARAM_Y', 'PARAM_I', 'PARAM_J']" icon="icons/arc-to-xyij.png">
        <param tool_tip="Enter 2 for CW arc, 3 for CCW arc" expanded="False" name="CW/CCW (G2|G3)" selected="False" value="2" call="#param_g" path="0:4:1:0" type="float" icon="icons/arc-cw-ccw.png"/>
        <param tool_tip="X" expanded="False" name="X" selected="False" value="10" call="#param_x" path="0:4:1:1" type="float" icon="icons/arc-to.png"/>
        <param tool_tip="Y" expanded="False" name="Y" selected="False" value="10" call="#param_y" path="0:4:1:2" type="float" icon="icons/arc-to.png"/>
        <param tool_tip="I" expanded="False" name="I" selected="False" value="0" call="#param_i" path="0:4:1:3" type="float" icon="icons/arc-center.png"/>
        <param tool_tip="J" expanded="False" name="J" selected="False" value="10" call="#param_j" path="0:4:1:4" type="float" icon="icons/arc-center.png"/>
      </feature>
      <feature src="mill/draw/line-rel.ini" expanded="True" help="&lt;big&gt;Line relative&lt;/big&gt;" icon="icons/line-rel.png" image="images/line-rel.png" after="" order="['PARAM_X', 'PARAM_Y']" call="&#10;#&lt;draw_tmp_x&gt; = [[#param_x]+#&lt;_draw_x&gt;]&#10;#&lt;draw_tmp_y&gt; = [[#param_y]+#&lt;_draw_y&gt;]&#10;;py,milldraw.line_to(interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'])&#10;#&lt;_draw_x&gt; = [#&lt;_draw_x&gt;+[#param_x]]&#10;#&lt;_draw_y&gt; = [#&lt;_draw_y&gt;+[#param_y]]&#10;" selected="False" path="0:4:2" definitions="" before="&#10;" type="Line relative" id="Line-relative-0001" name="Line relative 0001">
        <param tool_tip="X" expanded="False" name="X" selected="False" value="0" call="#param_x" path="0:4:2:0" type="float" icon=""/>
        <param tool_tip="Y" expanded="False" name="Y" selected="False" value="10" call="#param_y" path="0:4:2:1" type="float" icon=""/>
      </feature>
      <feature src="mill/draw/line-rel.ini" expanded="True" help="&lt;big&gt;Line relative&lt;/big&gt;" icon="icons/line-rel.png" image="images/line-rel.png" after="" order="['PARAM_X', 'PARAM_Y']" call="&#10;#&lt;draw_tmp_x&gt; = [[#param_x]+#&lt;_draw_x&gt;]&#10;#&lt;draw_tmp_y&gt; = [[#param_y]+#&lt;_draw_y&gt;]&#10;;py,milldraw.line_to(interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'])&#10;#&lt;_draw_x&gt; = [#&lt;_draw_x&gt;+[#param_x]]&#10;#&lt;_draw_y&gt; = [#&lt;_draw_y&gt;+[#param_y]]&#10;" selected="False" path="0:4:3" definitions="" before="&#10;" type="Line relative" id="Line-relative-0001" name="Line relative 0001">
        <param tool_tip="X" expanded="False" name="X" selected="False" value="-5" call="#param_x" path="0:4:3:0" type="float" icon=""/>
        <param tool_tip="Y" expanded="False" name="Y" selected="False" value="0" call="#param_y" path="0:4:3:1" type="float" icon=""/>
      </feature>
      <feature src="mill/draw/line-rel.ini" expanded="True" help="&lt;big&gt;Line relative&lt;/big&gt;" icon="icons/line-rel.png" image="images/line-rel.png" after="" order="['PARAM_X', 'PARAM_Y']" call="&#10;#&lt;draw_tmp_x&gt; = [[#param_x]+#&lt;_draw_x&gt;]&#10;#&lt;draw_tmp_y&gt; = [[#param_y]+#&lt;_draw_y&gt;]&#10;;py,milldraw.line_to(interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'])&#10;#&lt;_draw_x&gt; = [#&lt;_draw_x&gt;+[#param_x]]&#10;#&lt;_draw_y&gt; = [#&lt;_draw_y&gt;+[#param_y]]&#10;" selected="False" path="0:4:4" definitions="" before="&#10;" type="Line relative" id="Line-relative-0001" name="Line relative 0001">
        <param tool_tip="X" expanded="False" name="X" selected="False" value="0" call="#param_x" path="0:4:4:0" type="float" icon=""/>
        <param tool_tip="Y" expanded="False" name="Y" selected="False" value="10" call="#param_y" path="0:4:4:1" type="float" icon=""/>
      </feature>
      <feature src="mill/draw/line-rel.ini" expanded="True" help="&lt;big&gt;Line relative&lt;/big&gt;" icon="icons/line-rel.png" image="images/line-rel.png" after="" order="['PARAM_X', 'PARAM_Y']" call="&#10;#&lt;draw_tmp_x&gt; = [[#param_x]+#&lt;_draw_x&gt;]&#10;#&lt;draw_tmp_y&gt; = [[#param_y]+#&lt;_draw_y&gt;]&#10;;py,milldraw.line_to(interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'])&#10;#&lt;_draw_x&gt; = [#&lt;_draw_x&gt;+[#param_x]]&#10;#&lt;_draw_y&gt; = [#&lt;_draw_y&gt;+[#param_y]]&#10;" selected="False" path="0:4:5" definitions="" before="&#10;" type="Line relative" id="Line-relative-0001" name="Line relative 0001">
        <param tool_tip="X" expanded="False" name="X" selected="False" value="5" call="#param_x" path="0:4:5:0" type="float" icon=""/>
        <param tool_tip="Y" expanded="False" name="Y" selected="False" value="0" call="#param_y" path="0:4:5:1" type="float" icon=""/>
      </feature>
      <feature src="mill/draw/arc-xyij-rel.ini" after="" help="&lt;big&gt;Arc to&lt;/big&gt;&#10;Params:&#10;&#9;X,Y - absolute coordinates of the end&#10;&#9;I,J - relative to start position&#10;" name="Arc to by XYIJ 0001" image="images/arc-to-xyij.png" expanded="True" id="Arc-to-by-XYIJ-0001" call="&#10;#&lt;draw_tmp_g&gt; = [#param_g]&#10;#&lt;draw_tmp_x&gt; = [[#param_x]+#&lt;draw_x&gt;]&#10;#&lt;draw_tmp_y&gt; = [[#param_y]+#&lt;draw_y&gt;]&#10;#&lt;draw_tmp_i&gt; = [#param_i]&#10;#&lt;draw_tmp_j&gt; = [#param_j]&#10;;py,milldraw.arc_to(interpreter.this.params['draw_tmp_g'],interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'],interpreter.this.params['draw_tmp_i'],interpreter.this.params['draw_tmp_j'])&#10;#&lt;_draw_x&gt; = [[#param_x]+#&lt;draw_x&gt;]&#10;#&lt;_draw_y&gt; = [[#param_y]+#&lt;draw_y&gt;]&#10;" selected="False" definitions="" path="0:4:6" before="&#10;" type="Arc to by XYIJ" order="['PARAM_G', 'PARAM_X', 'PARAM_Y', 'PARAM_I', 'PARAM_J']" icon="icons/arc-to-xyij.png">
        <param tool_tip="Enter 2 for CW arc, 3 for CCW arc" expanded="False" name="CW/CCW (G2|G3)" selected="False" value="2" call="#param_g" path="0:4:6:0" type="float" icon="icons/arc-cw-ccw.png"/>
        <param tool_tip="X" expanded="False" name="X" selected="False" value="-10" call="#param_x" path="0:4:6:1" type="float" icon="icons/arc-to.png"/>
        <param tool_tip="Y" expanded="False" name="Y" selected="False" value="10" call="#param_y" path="0:4:6:2" type="float" icon="icons/arc-to.png"/>
        <param tool_tip="I" expanded="False" name="I" selected="False" value="-10" call="#param_i" path="0:4:6:3" type="float" icon="icons/arc-center.png"/>
        <param tool_tip="J" expanded="False" name="J" selected="False" value="0" call="#param_j" path="0:4:6:4" type="float" icon="icons/arc-center.png"/>
      </feature>
      <feature src="mill/draw/line-rel.ini" expanded="True" help="&lt;big&gt;Line relative&lt;/big&gt;" icon="icons/line-rel.png" image="images/line-rel.png" after="" order="['PARAM_X', 'PARAM_Y']" call="&#10;#&lt;draw_tmp_x&gt; = [[#param_x]+#&lt;_draw_x&gt;]&#10;#&lt;draw_tmp_y&gt; = [[#param_y]+#&lt;_draw_y&gt;]&#10;;py,milldraw.line_to(interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'])&#10;#&lt;_draw_x&gt; = [#&lt;_draw_x&gt;+[#param_x]]&#10;#&lt;_draw_y&gt; = [#&lt;_draw_y&gt;+[#param_y]]&#10;" selected="False" path="0:4:7" definitions="" before="&#10;" type="Line relative" id="Line-relative-0001" name="Line relative 0001">
        <param tool_tip="X" expanded="False" name="X" selected="True" value="-20" call="#param_x" path="0:4:7:0" type="float" icon=""/>
        <param tool_tip="Y" expanded="False" name="Y" selected="False" value="0" call="#param_y" path="0:4:7:1" type="float" icon=""/>
      </feature>
      <feature src="mill/draw/close.ini" expanded="False" help="&lt;big&gt;Close drawing&lt;/big&gt;" icon="icons/close.png" image="images/close.png" after="" order="[]" call="&#10;;py,milldraw.line_to(interpreter.this.params['_draw_start_x'],interpreter.this.params['_draw_start_y'])&#10;#&lt;_draw_x&gt; = [#&lt;_draw_start_x&gt;]&#10;#&lt;_draw_y&gt; = [#&lt;_draw_start_y&gt;]&#10;" selected="False" path="0:4:8" definitions="" before="&#10;" type="Close drawing" id="Close-drawing-0001" name="Close drawing 0001"/>
    </param>
  </feature>
</LinuxCNC-Features>
